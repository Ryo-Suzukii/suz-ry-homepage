<template>
  <div class="min-h-screen bg-gradient-to-b from-black via-gray-900 to-black text-white">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="relative h-64 flex items-center justify-center">
      <div ref="headerScene" class="absolute inset-0" />
      <div class="relative z-10 text-center">
        <h1 class="text-5xl font-bold mb-4 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400">
          Contact
        </h1>
        <p class="text-xl text-gray-300">ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„</p>
      </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="max-w-4xl mx-auto px-6 py-12">
      <div class="grid lg:grid-cols-2 gap-12">
        <!-- é€£çµ¡å…ˆæƒ…å ± -->
        <div class="space-y-8">
          <div>
            <h2 class="text-3xl font-bold mb-6 text-purple-400">ğŸ“¡ é€£çµ¡æ–¹æ³•</h2>
            <p class="text-gray-300 mb-8">
              æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›¸è«‡ã€æŠ€è¡“çš„ãªè³ªå•ã€ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ææ¡ˆãªã©ã€
              ã©ã®ã‚ˆã†ãªå†…å®¹ã§ã‚‚ãŠæ°—è»½ã«ã”é€£çµ¡ãã ã•ã„ã€‚
            </p>
          </div>

          <!-- é€£çµ¡å…ˆã‚«ãƒ¼ãƒ‰ -->
          <div class="space-y-4">
            <div v-for="contact in contactMethods" :key="contact.type" class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-purple-400/50 transition-colors">
              <div class="flex items-center gap-4">
                <div class="text-3xl">{{ contact.icon }}</div>
                <div>
                  <h3 class="text-lg font-semibold mb-1">{{ contact.type }}</h3>
                  <div class="text-gray-300">{{ contact.value }}</div>
                  <div class="text-sm text-gray-400 mt-1">{{ contact.description }}</div>
                </div>
              </div>
            </div>
          </div>

          <!-- ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒªãƒ³ã‚¯ -->
          <div>
            <h3 class="text-xl font-semibold mb-4 text-cyan-400">ğŸŒ Social Links</h3>
            <div class="flex flex-wrap gap-4">
              <a
                v-for="social in socialLinks"
                :key="social.name"
                :href="social.url"
                target="_blank"
                class="flex items-center gap-3 px-4 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors border border-gray-600 hover:border-gray-500"
              >
                <span class="text-xl">{{ social.icon }}</span>
                <span>{{ social.name }}</span>
              </a>
            </div>
          </div>

          <!-- å¯¾å¿œå¯èƒ½æ¥­å‹™ -->
          <div>
            <h3 class="text-xl font-semibold mb-4 text-green-400">ğŸ’¼ å¯¾å¿œå¯èƒ½æ¥­å‹™</h3>
            <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700">
              <div class="grid md:grid-cols-2 gap-4">
                <div v-for="service in services" :key="service" class="flex items-center gap-3">
                  <div class="w-2 h-2 bg-green-400 rounded-full" />
                  <span class="text-gray-300">{{ service }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700">
          <h2 class="text-2xl font-bold mb-6 text-center text-pink-400">ğŸ“¨ ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ </h2>
          
          <form @submit.prevent="submitForm" class="space-y-6">
            <div>
              <label for="name" class="block text-sm font-medium mb-2">ãŠåå‰ *</label>
              <input
                id="name"
                v-model="form.name"
                type="text"
                required
                class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-purple-400 transition-colors"
                placeholder="å±±ç”°å¤ªéƒ"
              >
            </div>

            <div>
              <label for="email" class="block text-sm font-medium mb-2">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>
              <input
                id="email"
                v-model="form.email"
                type="email"
                required
                class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-purple-400 transition-colors"
                placeholder="example@email.com"
              >
            </div>

            <div>
              <label for="subject" class="block text-sm font-medium mb-2">ä»¶å *</label>
              <select
                id="subject"
                v-model="form.subject"
                required
                class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-purple-400 transition-colors"
              >
                <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                <option value="project">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›¸è«‡</option>
                <option value="collaboration">ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</option>
                <option value="technical">æŠ€è¡“çš„ãªè³ªå•</option>
                <option value="recruitment">æ¡ç”¨ã«ã¤ã„ã¦</option>
                <option value="other">ãã®ä»–</option>
              </select>
            </div>

            <div>
              <label for="message" class="block text-sm font-medium mb-2">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ *</label>
              <textarea
                id="message"
                v-model="form.message"
                required
                rows="6"
                class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-purple-400 transition-colors resize-none"
                placeholder="ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’ã§ãã‚‹ã ã‘è©³ã—ããŠèã‹ã›ãã ã•ã„..."
              />
            </div>

            <div>
              <label class="flex items-start gap-3">
                <input
                  v-model="form.privacy"
                  type="checkbox"
                  required
                  class="mt-1 w-4 h-4 text-purple-600 bg-gray-700 border-gray-600 rounded focus:ring-purple-400 focus:ring-2"
                >
                <span class="text-sm text-gray-300">
                  ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã«åŒæ„ã—ã¾ã™ã€‚ãŠé ã‹ã‚Šã—ãŸå€‹äººæƒ…å ±ã¯ã€ãŠå•ã„åˆã‚ã›ã®å¯¾å¿œã«ã®ã¿ä½¿ç”¨ã„ãŸã—ã¾ã™ã€‚
                </span>
              </label>
            </div>

            <button
              type="submit"
              :disabled="isSubmitting"
              :class="[
                'w-full px-6 py-4 rounded-lg font-semibold transition-colors',
                isSubmitting
                  ? 'bg-gray-600 cursor-not-allowed'
                  : 'bg-purple-600 hover:bg-purple-700'
              ]"
            >
              {{ isSubmitting ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡ã™ã‚‹ ğŸš€' }}
            </button>
          </form>

          <!-- é€ä¿¡å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
          <div v-if="isSubmitted" class="mt-6 p-4 bg-green-600/20 border border-green-400/30 rounded-lg">
            <div class="flex items-center gap-3">
              <span class="text-2xl">âœ…</span>
              <div>
                <div class="font-semibold text-green-400">é€ä¿¡å®Œäº†</div>
                <div class="text-sm text-gray-300">ãŠå•ã„åˆã‚ã›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚24æ™‚é–“ä»¥å†…ã«ã”è¿”ä¿¡ã„ãŸã—ã¾ã™ã€‚</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- FAQ -->
      <section class="mt-16">
        <h2 class="text-3xl font-bold mb-8 text-center text-yellow-400">â“ ã‚ˆãã‚ã‚‹è³ªå•</h2>
        <div class="space-y-4">
          <div v-for="faq in faqs" :key="faq.question" class="bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700">
            <button
              @click="faq.open = !faq.open"
              class="w-full px-6 py-4 text-left flex justify-between items-center hover:bg-gray-700/50 transition-colors"
            >
              <span class="font-semibold">{{ faq.question }}</span>
              <span class="text-2xl transform transition-transform" :class="{ 'rotate-45': faq.open }">+</span>
            </button>
            <div v-show="faq.open" class="px-6 pb-4">
              <p class="text-gray-300">{{ faq.answer }}</p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <div class="max-w-4xl mx-auto px-6 py-12">
      <div class="flex justify-between items-center">
        <router-link to="/profile" class="btn-back">
          â† ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
        </router-link>
        <router-link to="/" class="btn-next">
          ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
        </router-link>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted, onUnmounted } from 'vue'
import * as THREE from 'three'

const headerScene = ref(null)
const isSubmitting = ref(false)
const isSubmitted = ref(false)

let scene, camera, renderer, satellites, animationId

const form = reactive({
  name: '',
  email: '',
  subject: '',
  message: '',
  privacy: false
})

const contactMethods = [
  {
    type: 'Email',
    icon: 'ğŸ“§',
    value: 'astronautryosuzuki@gmail.com',
    description: '24æ™‚é–“ä»¥å†…ã«è¿”ä¿¡ã—ã¾ã™'
  },
  {
    type: 'Location',
    icon: 'ğŸ“',
    value: 'Tokyo, Japan',
    description: 'ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ»å¯¾é¢ã©ã¡ã‚‰ã‚‚å¯¾å¿œå¯'
  }
]

const socialLinks = [
  { name: 'GitHub', icon: 'ğŸ™', url: 'https://github.com/ryo-suzukii' },
  { name: 'Twitter', icon: 'ğŸ¦', url: 'https://twitter.com/Hayaa_6211' },
  { name: 'Qiita', icon: 'ğŸ“', url: 'https://qiita.com/Hayaa6211' },
  { name: 'zenn', icon: 'ğŸ“˜', url: 'https://zenn.dev/ha' },
]

const services = [
  'Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™º',
  'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™º',
  'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIé–‹ç™º',
  'UI/UXãƒ‡ã‚¶ã‚¤ãƒ³',
  'æŠ€è¡“ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°',
  'ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼',
  'æŠ€è¡“è¨˜äº‹åŸ·ç­†',
  'ãƒ¡ãƒ³ã‚¿ãƒªãƒ³ã‚°'
]

const faqs = ref([
  {
    question: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœŸé–“ã¯ã©ã®ãã‚‰ã„ã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ',
    answer: 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦æ¨¡ã‚„è¦ä»¶ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ãŒã€å°è¦æ¨¡ãªWebã‚µã‚¤ãƒˆã¯2-4é€±é–“ã€ä¸­è¦æ¨¡ãªWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯2-3ãƒ¶æœˆç¨‹åº¦ãŒç›®å®‰ã§ã™ã€‚è©³ç´°ã¯ãŠå•ã„åˆã‚ã›æ™‚ã«ã”ç›¸è«‡ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚',
    open: false
  },
  {
    question: 'æ–™é‡‘ä½“ç³»ã¯ã©ã†ãªã£ã¦ã„ã¾ã™ã‹ï¼Ÿ',
    answer: 'æ™‚é–“å˜ä¾¡åˆ¶ã¾ãŸã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºå®šåˆ¶ã‹ã‚‰ãŠé¸ã³ã„ãŸã ã‘ã¾ã™ã€‚å†…å®¹ã‚’è©³ã—ããŠèãã—ãŸä¸Šã§ã€æœ€é©ãªæ–™é‡‘ãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã„ãŸã—ã¾ã™ã€‚è¦‹ç©ã‚‚ã‚Šã¯ç„¡æ–™ã§ã™ã€‚',
    open: false
  },
  {
    question: 'ãƒªãƒ¢ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã¯å¯èƒ½ã§ã™ã‹ï¼Ÿ',
    answer: 'ã¯ã„ã€å®Œå…¨ãƒªãƒ¢ãƒ¼ãƒˆã§ã®å¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè­°ã‚„ãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ã‚’æ´»ç”¨ã—ã€ã‚¹ãƒ ãƒ¼ã‚ºãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¿ƒãŒã‘ã¦ã„ã¾ã™ã€‚',
    open: false
  },
  {
    question: 'æŠ€è¡“çš„ãªè³ªå•ã‚„ç›¸è«‡ã¯ã§ãã¾ã™ã‹ï¼Ÿ',
    answer: 'æŠ€è¡“çš„ãªã”è³ªå•ã‚„é–‹ç™ºã«é–¢ã™ã‚‹ã”ç›¸è«‡ã‚‚æ‰¿ã£ã¦ãŠã‚Šã¾ã™ã€‚Discord ã‚„ãƒ¡ãƒ¼ãƒ«ã§ãŠæ°—è»½ã«ãŠå£°ãŒã‘ãã ã•ã„ã€‚',
    open: false
  }
])

async function submitForm() {
  isSubmitting.value = true
  
  try {
    // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    await new Promise(resolve => setTimeout(resolve, 2000))
    
    // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã“ã§APIã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡
    console.log('Form submitted:', form)
    
    isSubmitted.value = true
    
    // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
    Object.keys(form).forEach(key => {
      if (key === 'privacy') {
        form[key] = false
      } else {
        form[key] = ''
      }
    })
    
  } catch (error) {
    console.error('Form submission error:', error)
    alert('é€ä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãçµŒã£ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚')
  } finally {
    isSubmitting.value = false
  }
}

function initHeaderScene() {
  if (!headerScene.value) return

  scene = new THREE.Scene()
  camera = new THREE.PerspectiveCamera(75, window.innerWidth / 200, 0.1, 1000)
  renderer = new THREE.WebGLRenderer({ alpha: true })
  
  renderer.setSize(window.innerWidth, 200)
  renderer.setClearColor(0x000000, 0)
  headerScene.value.appendChild(renderer.domElement)

  // é€šä¿¡è¡›æ˜Ÿ
  satellites = []
  for (let i = 0; i < 8; i++) {
    const geometry = new THREE.BoxGeometry(4, 2, 6)
    const material = new THREE.MeshBasicMaterial({
      color: new THREE.Color().setHSL(0.8, 0.8, 0.6),
      wireframe: true,
      transparent: true,
      opacity: 0.7
    })
    
    const satellite = new THREE.Mesh(geometry, material)
    satellite.position.set(
      (Math.random() - 0.5) * 200,
      (Math.random() - 0.5) * 100,
      (Math.random() - 0.5) * 100
    )
    
    scene.add(satellite)
    satellites.push(satellite)
  }

  // ä¿¡å·ç·š
  const signalGeometry = new THREE.BufferGeometry()
  const positions = []
  
  for (let i = 0; i < satellites.length - 1; i++) {
    positions.push(
      satellites[i].position.x, satellites[i].position.y, satellites[i].position.z,
      satellites[i + 1].position.x, satellites[i + 1].position.y, satellites[i + 1].position.z
    )
  }
  
  signalGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3))
  const signalMaterial = new THREE.LineBasicMaterial({ 
    color: 0xff6b9d, 
    transparent: true, 
    opacity: 0.4 
  })
  const signals = new THREE.LineSegments(signalGeometry, signalMaterial)
  scene.add(signals)

  camera.position.z = 100
  animate()
}

function animate() {
  animationId = requestAnimationFrame(animate)
  
  satellites.forEach((satellite, index) => {
    satellite.rotation.x += 0.01 + index * 0.002
    satellite.rotation.y += 0.01 + index * 0.003
    satellite.position.x += Math.sin(Date.now() * 0.001 + index) * 0.1
  })

  renderer.render(scene, camera)
}

onMounted(() => {
  initHeaderScene()
})

onUnmounted(() => {
  if (animationId) {
    cancelAnimationFrame(animationId)
  }
  if (renderer && headerScene.value) {
    headerScene.value.removeChild(renderer.domElement)
  }
})
</script>

<style scoped>
.btn-back, .btn-next {
  padding: 0.75rem 1.5rem;
  background-color: rgb(31 41 55);
  border: 1px solid rgb(75 85 99);
  border-radius: 0.5rem;
  transition: all 0.3s;
}

.btn-back:hover, .btn-next:hover {
  background-color: rgb(55 65 81);
  border-color: rgb(107 114 128);
}
</style>
